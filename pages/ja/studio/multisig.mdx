---
title: マルチシグウォレットの使用
---

Subgraph Studio は現在、Multisig ウォレットでの署名をサポートしていません。それまでは、[GNS contract](https://github.com/graphprotocol/contracts/blob/dev/contracts/discovery/GNS.sol)関数を呼び出してサブグラフを公開する方法について、このガイドに従ってください。

### サブグラフの作成

Similarly to using a regular wallet, you can create a subgraph by connecting your non-multisig wallet in Subgraph Studio. Once you connect the wallet, simply create a new subgraph. Make sure you fill out all the details, such as subgraph name, description, image, website, and source code URL if applicable.

スターターサブグラフを初期化するには、UI に表示されているコマンドに従うか、単純に以下を実行します。

```
graph init --studio <SUBGRAPH_SLUG>
```

`SUBGRAPH_SLUG` is the name of your subgraph that you can copy from the UI or the URL in the browser. This command should create a folder in your file system with all the necessary files to start developing a subgraph.

### サブグラフのデプロイ

サブグラフをグラフノードにデプロイする準備ができたら、UI に表示されるコマンドに従うか、以下のコマンドを実行します:

```
graph deploy --studio <SUBGRAPH_SLUG>
```

**Note**: Make sure that you are inside the subgraph folder before running the command.

### サブグラフまたはバージョンの発行

新しいサブグラフを分散型ネットワークに公開するか、以前に公開したサブグラフの新しいバージョンを公開することができます。

#### 新しいサブグラフの発行

マルチシグウォレットを使ってサブグラフを公開するには、いくつかの方法があります。ここでは、Etherscan を使って[GNS contract](https://etherscan.io/address/0xaDcA0dd4729c8BA3aCf3E99F3A9f471EF37b6825)の[`publishNewSubgraph`](https://github.com/graphprotocol/contracts/blob/dev/contracts/discovery/GNS.sol#L231)関数を呼び出す方法を説明します。

この関数を使用する前に、そのための入力引数を生成する必要があります。Subgraph Studio で[このページ](https://thegraph.com/studio/multisig)にアクセスし、以下を提供します:

- あなたのマルチシグウォレットの Ethereum アドレス
- 公開したいサブグラフ
- 公開したいバージョン

"Get Arguments"をクリックすると、全てのコントラクト引数が生成されます

4 つの引数があるはずです:

- `graphAccount`: マルチシグのアカウントアドレスです
- `subgraphDeploymentID`: そのサブグラフのデプロイメント ID の 16 進数ハッシュです
- `versionMetadata`: IPFS にアップロードされるバージョンのメタデータ（ラベルと説明）で、JSON ファイルの 16 進ハッシュ値が提供されます
- `subgraphMetadata`: similar to version metadata, subgraph metadata (name, image, description, website, and source code URL) gets uploaded to IPFS, and we provide the hex hash value for that JSON file

この 4 つの引数で、以下のことができます:

- Etherscan の[our GraphProxy](https://etherscan.io/address/0xaDcA0dd4729c8BA3aCf3E99F3A9f471EF37b6825#writeProxyContract)コントラクトにアクセスする
- マルチシグの WalletConnect Safe アプリから WalletConnect を使って Etherscan に接続する
- Call the `publishNewSubgraph` method with the parameters that were generated by our tool

#### 新しいバージョンの発行

既存のサブグラフの新バージョンを発行するには、まずそのための入力引数を生成する必要があります。Subgraph Studio の[このページ](https://thegraph.com/studio/multisig)にアクセスして、以下を提供します:

- あなたのマルチシグウォレットの Ethereum アドレス
- 公開したいサブグラフ
- 公開したいバージョン
- Graph Explorer で更新したいサブグラフの ID

”Get Arguments"をクリックすると、全てのコントラクトの引数が生成されます。

UI の右側にある「`Publish New Version`」のタイトルの下に、4 つの引数があります:

- `graphAccount`: あなたのマルチシグアカウントのアドレス
- `subgraphNumber`: 既に公開されているサブグラフの番号です。これは、The Graph Network サブグラフを介してクエリされた公開サブグラフのサブグラフ ID の一部です
- `subgraphDeploymentID`: そのサブグラフのデプロイメント ID の 16 進ハッシュです
- `versionMetadata`: バージョンのメタデータ(ラベルと説明) を IPFS にアップロードし、その JSON ファイルの 16 進数のハッシュ値を提供します

Now that we generated all the arguments you are ready to proceed and call the `publishNewVersion` method. To do so, you should:

- Etherscan の[the GraphProxy](https://etherscan.io/address/0xaDcA0dd4729c8BA3aCf3E99F3A9f471EF37b6825#writeProxyContract)コントラクトにアクセスする
- マルチシグの WalletConnect Safe アプリから WalletConnect を使って Etherscan に接続する
- Call the `publishNewVersion` method with the parameters that were generated by our tool

トランザクションが成功すると、グラフエクスプローラーにあなたのサブグラフの新バージョンが表示されるはずです。これは、キュレーターがそのサブグラフにシグナルを開始し、インデクサーがそのサブグラフにインデックスを開始できることを意味します。
